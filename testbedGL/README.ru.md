[EN](README.md) RU

[channels]: channels/README.ru.md
[main-ui]: gui/README.ru.md
[ext-shell]: testbedGL/README.ru.md
[worker]: worker/README.ru.md
[config-keeper]: configKeeper/README.ru.md
[log-keeper]: logKeeper/README.ru.md

Графическая оболочка
====================

testbedGL — это графическая оболочка, которая реализует UI для человека
и предоставляет программный API для
[тестовго модуля алгоритма](docs/hexlib-test-module.ru.md).

Графическая оболочка реализована через OpenGL и работает на Windows и Linux.
Для работы требуется NVIDIA GPU.

* [Пользовательский интерфейс](docs/ui.ru.md).
* [Как сделать бинарь с использованием графической оболочки](docs/linking.ru.md).
* [Как запустить UI внутри Docker с аппаратным OpenGL
и доступом по VNC](docs/docker-opengl-vnc/how-to.ru.md).

Программная документация
========================

Графическая оболочка – это приложение OpenGL. Она использует переносимую
библиотеку GLFW для создания окна и контекста OpenGL, а также для обработки
ввода-вывода клавиатуры и мыши.

[Внешняя оболочка UI][ext-shell], завязанная на OpenGL и GLFW, изолирована в
отдельном модуле, а [основная часть UI][main-ui] не зависит от оконной системы
и представляет собой класс, который принимает на вход поток событий клавиатуры
и мыши, а на выход рисует полную картинку содержимого окна, используя
те же средства, что и любая обработка изображений в hexlib.

[Принцип обработки ошибок в оболочке](docs/error-handling.ru.md).

Графическая оболочка состоит из нескольких тредов,
[взаимодействующих по единому принципу][channels]:

* GUI — главный тред, который стартует из `main`. В нем
  находится цикл обработки событий и отрисовки окна. Цикл этого треда короткий
  для поддержания отзывчивости, и он не выполняет долгих операций.

  В этом треде работают [внешняя оболочка][ext-shell] (`/testbedGL`) и
  [основная часть UI][main-ui] (`/gui`).

* [WORKER][worker] нужен, чтобы разгрузить тред GUI от длительных операций.
  Он владеет экземпляром модуля алгоритма и вызывает его.
  Циклы обработки WORKER запускаются по его собственному желанию.
  Каталог `/worker`.

* [ConfigKeeper][config-keeper] отвечает за асинхронные операции
  с файлом конфига, такие как обновление файла конфига и его редактирование.
  Каталог `/configKeeper`.

* [LogKeeper][log-keeper] отвечает за асинхронное обновление файла лога
  и его редактирование. Каталог `/logKeeper`.

